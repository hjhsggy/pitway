* 分布式锁集中实现方式和原理

- [] 问题来源 
 ** 产品的需求中要求每天要处理一个定时任务, 但是由于部署的服务程序有多个实例, 每个实例质检互不影响, 这样每个实例都有可能执行这个任务这样就会出现一些数据异常

- [] 分布式锁具备哪些条件

  ** 1、在分布式系统环境下，一个方法在同一时间只能被一个机器的一个线程执行；
  ** 2、高可用的获取锁与释放锁；
  ** 3、高性能的获取锁与释放锁；
  ** 4、具备可重入特性；
  ** 5、具备锁失效机制，防止死锁；
  ** 6、具备非阻塞锁特性，即没有获取到锁将直接返回获取锁失败。

- [] 分布式锁实现方式

  - 目前几乎所有的大型网站都是分布式部署的, 分布式系统设计的CAP理论来看, 
  - 任何一个分布式系统都无法同时满足一致性(Consistency),可用性(Availability),分区容错性(Paration Tolerance)

  ** 几种常见的分布式锁设计

  *** 基于MySQL的分布式锁

  - 思想:在数据库中创建一张表, 表中包含方法名, 在方法名字段上创建唯一约束, 想要执行某个方法必须用该方法名向数据库插入数据, 插入成功则获取锁, 执行完后删除对应的行数据释放锁

  - 存在问题: 
    - 基于mysql实现, mysql的性能稳定性影响分布式锁的可用性和性能, 需要 双机或多机部署, 数据同步主备切等
    - 

  *** 基于Redis的分布式锁

  - 思想: 在redis中 SETNX 设置一个key, 设置一个自动过期时间. 获取锁的时候设置超时时间获取不到则放弃操作, 执行完后删除数据释放锁

  *** 基于Zookeeper的分布式锁

  - 思想: zookeeper是一个分布式应用提供一致性服务, 内部是一个分层的文件系统目录树结构, 同一个目录下仅能有一个唯一的文件名, 可以基于此实现

  - 步骤:
   - 创建一个目录
   - 